<html>
<!-- TODO:
Need to update the names of the tasks when the user does an upkey (edits the tasks).
Need to do task deletion.
Reordering?
Modals for task detail?
	-->
	<head>
		<style type="text/css">
		#task_wrapper {
			background-color: #E9E9E9;
			width: 40%;
			height: 40%;
			margin: 0 auto;
		}

		#task_list {
			padding-left: 5%;
		}

		.form-group {
			padding-left: 5%;
			padding-top: 5%;
		}

		.form-group .form-control {
			max-width: 75%;
			display:inline;
		}


		</style>
		
		<link href="../CSS/bootstrap-3.0.0/dist/css/bootstrap.css" rel="stylesheet"/>
		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
		<script src="../CSS/bootstrap-3.0.0/dist/js/bootstrap.js"/></script>

	</head>

	<body>
		<!--NAVBAR-->
    <div class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="splash.html">What do you have Tudu?</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="home.html">Home</a></li>
            <li><a href="tasks.html">View Tasks</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Edit <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Edit Tasks</a></li>
                <li><a href="#">Edit Events</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Other Calendars</li>
                <li><a href="#">Import</a></li>
                <li><a href="#">Export</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">View Stats</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#">Logout</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  <!--NAVBAR END-->
		<div id="task_wrapper">
			<div class="form-group">
				<input id="add_task_input" type="text" class="form-control" placeholder="Add a new task">
				<button id="add_task_btn" type="button" class="btn btn-primary btn-lg">
  					<span style="margin-top:-3px"class="glyphicon glyphicon-plus"></span>
				</button>
			</div> <!-- form-group -->

			<ul id="task_list" class="col-lg-6" style="list-style-type:none;">

<!-- Button trigger modal -->
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button>

		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
		      </div>
		      <div class="modal-body">
		        ...
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        <button type="button" class="btn btn-primary">Save changes</button>
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
<!-- 				<div style="visibility:hidden" id="example_task" class="input-group">
						<span class="input-group-addon">
							<input type="checkbox">
						</span>
						<input type="text" class="form-control" value="asdfasdf">
				</div> -->
			</ul><!-- task_list -->

		</div> <!-- task_wrapper -->

		<script>
		var tasks = new Array("CS 351 Final Project", "Walk Dog", "Hate Life");


		$(document).ready(function() {
  			
  			// $('#myModal').modal(
  			// 	{keyboard: true
  			// 	})

  			load_tasks();

  			$("#task_wrapper").on('click', '.task_checkbox', function(){
  				$(this).parent().parent().parent().hide('slow', function() {$(this).remove();});			
  			});

			$( "#add_task_btn" ).click(function() {
  				//alert( "=" + $("#add_task_input").val());
  				var new_task = $("#add_task_input").val();
  				tasks.push(new_task);
  				update_tasks(new_task);
  				var cur_div_height = $("#task_wrapper").height();
  				var cur_div_top = $("#task_wrapper").offset().top;

  				var last_task_top = $("#task_list li:last-child").offset().top;
  				var task_height = $(".form-group").height();
  				var y_pos = last_task_top + task_height;
  				
  				var div_level = cur_div_top + cur_div_height - 20; // 20 for a small buffer

  				if (y_pos >= div_level) {
  					$( "#task_wrapper" ).animate({
				    height: "+="+task_height
				  }, 100, function() {
				    // Animation complete.
				  });
  				}
			});
		});

		function load_tasks() {							
			for (var i=0; i < tasks.length; i++) {
				var div = '<li>' + 
							'<div class="input-group">' +
	          				'    <span class="input-group-addon">' +
					          '        <input class="task_checkbox" type="checkbox">' +
					          '		</span>' +
					          '		<input type="text" class="form-control" value="'+tasks[i]+'" >' +
					          '</div>' +
					       '</li>' ;

				$('#task_list').append(div);
			}
		}

		function update_tasks(new_task) {
				var div = '<li>' + 
							'<div class="input-group">' +
	          				'    <span class="input-group-addon">' +
					          '        <input class="task_checkbox" type="checkbox">' +
					          '		</span>' +
					          '		<input type="text" class="form-control" value="'+new_task+'" >' +
					          '</div>' +
					       '</li>' ;

				$('#task_list').append(div);

		}

		
		
		</script>

	</body>
</html>





