<html>
<!-- TODO:
Need to update the names of the tasks when the user does an upkey (edits the tasks).
Need to do task deletion.
Reordering?
Modals for task detail?
	-->
	<head>
		<style type="text/css">
		#task_wrapper {
			background-color: #E9E9E9;
			width: 40%;
			height: 40%;
			margin-top: 10%;
			margin-left: 30%;
			margin-bottom: 10%;
		}

		#task_list {
			padding-left: 5%;
		}

		.form-group {
			padding-left: 5%;
			padding-top: 5%;
		}

		.form-group .form-control {
			max-width: 75%;
			display:inline;
		}


		</style>
		
		<link href="../CSS/bootstrap-3.0.0/dist/css/bootstrap.css" rel="stylesheet"/>
		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>

	</head>

	<body>
		<div id="task_wrapper">
			<div class="form-group">
				<input id="add_task_input" type="text" class="form-control" placeholder="Add a new task">
				<button id="add_task_btn" type="button" class="btn btn-primary btn-lg">
  					<span style="margin-top:-3px"class="glyphicon glyphicon-plus"></span>
				</button>
			</div> <!-- form-group -->

			<ul id="task_list" class="col-lg-6" style="list-style-type:none;">

<!-- 				<div style="visibility:hidden" id="example_task" class="input-group">
						<span class="input-group-addon">
							<input type="checkbox">
						</span>
						<input type="text" class="form-control" value="asdfasdf">
				</div> -->
			</ul><!-- task_list -->

		</div> <!-- task_wrapper -->

		<script>
		var tasks = new Array("CS 351 Final Project", "Walk Dog");


		$(document).ready(function() {
  			
  			load_tasks();

  			$("#task_wrapper").on('click', '.task_checkbox', function(){
  				$(this).parent().parent().parent().hide('slow', function() {$(this).remove();});			
  			});

			$( "#add_task_btn" ).click(function() {
  				//alert( "=" + $("#add_task_input").val());
  				var new_task = $("#add_task_input").val();
  				tasks.push(new_task);
  				update_tasks(new_task);
  				var cur_div_height = $("#task_wrapper").height();
  				var cur_div_top = $("#task_wrapper").offset().top;

  				var last_task_top = $("#task_list li:last-child").offset().top;
  				var task_height = $(".form-group").height();
  				var y_pos = last_task_top + task_height;
  				
  				var div_level = cur_div_top + cur_div_height - 20; // 20 for a small buffer

  				if (y_pos >= div_level) {
  					$( "#task_wrapper" ).animate({
				    height: "+="+task_height
				  }, 1000, function() {
				    // Animation complete.
				  });
  				}
			});
		});

		function load_tasks() {							
			for (var i=0; i < tasks.length; i++) {
				var div = '<li>' + 
							'<div class="input-group">' +
	          				'    <span class="input-group-addon">' +
					          '        <input class="task_checkbox" type="checkbox">' +
					          '		</span>' +
					          '		<input type="text" class="form-control" value="'+tasks[i]+'" >' +
					          '</div>' +
					       '</li>' ;

				$('#task_list').append(div);
			}
		}

		function update_tasks(new_task) {
				var div = '<li>' + 
							'<div class="input-group">' +
	          				'    <span class="input-group-addon">' +
					          '        <input class="task_checkbox" type="checkbox">' +
					          '		</span>' +
					          '		<input type="text" class="form-control" value="'+new_task+'" >' +
					          '</div>' +
					       '</li>' ;

				$('#task_list').append(div);

		}

		
		
		</script>

	</body>
</html>





